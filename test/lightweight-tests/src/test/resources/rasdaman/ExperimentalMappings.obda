[PrefixDeclaration]
:		http://www.semanticweb.org/arkaghosh/OntoRaster/
geo:		http://www.opengis.net/ont/geosparql#
owl:		http://www.w3.org/2002/07/owl#
rdf:		http://www.w3.org/1999/02/22-rdf-syntax-ns#
xml:		http://www.w3.org/XML/1998/namespace
xsd:		http://www.w3.org/2001/XMLSchema#
obda:		https://w3id.org/obda/vocabulary#
rdfs:		http://www.w3.org/2000/01/rdf-schema#
sosa:		http://www.w3.org/ns/sosa/
rasdb:		http://www.semanticweb.org/RasterDataCube/

[MappingDeclaration] @collection [[
mappingId	mapping_region_class
target		:region/{region_id} a :Region .
source		select region_id from four_regions

mappingId	mapping_region_name
target		:region/{region_id} rdfs:label {region_name}^^xsd:string .
source		select region_id, name_2 as region_name from four_regions

mappingId	mapping_region_geometry
target		:region/{region_id} geo:asWKT {geometry}^^geo:wktLiteral .
source		select region_id, st_astext((st_dump(geom)).geom) as geometry from four_regions

mappingId	mapping_rastername_based_on_vector_region_lookup
target		:raster/{raster_id} rasdb:hasRasterName {raster_name}^^xsd:string .
source		SELECT DISTINCT id as raster_id, coverage_id as raster_name
            FROM lookup_main
            WHERE max_lat > (SELECT  ST_YMax(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
            WHERE   m.name_2 = 'Stockholm') AND min_lat < (SELECT  ST_YMin(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
            WHERE   m.name_2 = 'Stockholm') AND max_long > (SELECT  ST_XMax(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
            WHERE   m.name_2 = 'Stockholm') AND min_long < (SELECT  ST_XMin(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
            WHERE   m.name_2 = 'Stockholm')

;mappingId	mapping_rastername_based_on_III_type_region_lookup
;target		:raster/{raster_id} rasdb:hasRasterName {raster_name}^^xsd:string .
;source      SELECT DISTINCT id as raster_id, coverage_id as raster_name
;            			FROM lookup_main
;            			WHERE max_lat > (SELECT  ST_YMax(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
;            			WHERE   m.name_2 = 'Göteborg' LIMIT 1) AND min_lat < (SELECT  ST_YMin(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
;            			WHERE   m.name_2 = 'Göteborg' LIMIT 1) AND max_long > (SELECT  ST_XMax(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
;            			WHERE   m.name_2 = 'Göteborg' LIMIT 1) AND min_long < (SELECT  ST_XMin(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
;            			WHERE   m.name_2 = 'Göteborg' LIMIT 1)

;mappingId	mapping_rastername_based_on_vector_region_lookup
;target		:raster/{raster_id} rasdb:hasRasterName {raster_name}^^xsd:string .
;source		SELECT DISTINCT id as raster_id, coverage_id as raster_name
            ;FROM lookup_main
            ;WHERE max_lat > (SELECT  ST_YMax(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
            ;WHERE   m.name_2 = 'Bolzano') AND min_lat < (SELECT  ST_YMin(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
            ;WHERE   m.name_2 = 'Bolzano') AND max_long > (SELECT  ST_XMax(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
            ;WHERE   m.name_2 = 'Bolzano') AND min_long < (SELECT  ST_XMin(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
            ;WHERE   m.name_2 = 'Bolzano')

;mappingId	mapping_rastername_based_on_III_type_region_lookup
;target		:raster/{raster_id} rasdb:hasRasterName {raster_name}^^xsd:string .
;source      SELECT DISTINCT id as raster_id, coverage_id as raster_name
;            			FROM lookup_main
;            			WHERE max_lat > (SELECT  ST_YMax(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
;            			WHERE   m.name_2 = 'Rosenheim' LIMIT 1) AND min_lat < (SELECT  ST_YMin(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
;            			WHERE   m.name_2 = 'Rosenheim' LIMIT 1) AND max_long > (SELECT  ST_XMax(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
;            			WHERE   m.name_2 = 'Rosenheim' LIMIT 1) AND min_long < (SELECT  ST_XMin(ST_GeomFromText(ST_AsText((ST_Dump(m.geom)).geom))) FROM four_regions as m
;            			WHERE   m.name_2 = 'Rosenheim' LIMIT 1)


mappingId	mapping_get_raster_spatial_extent_lookup
target		:raster/{raster_id} rasdb:hasMaxLatitude {max_lat}^^xsd:double ; rasdb:hasMinLatitude {min_lat}^^xsd:double ; rasdb:hasMaxLongitude {max_long}^^xsd:double ; rasdb:hasMinLongitude {min_long}^^xsd:double .
source		SELECT DISTINCT id AS raster_id, coverage_id AS raster_name, max_lat, min_lat, max_long, min_long FROM lookup_main

mappingId	mapping_get_temporal_dimension_lookup
target		:raster/{raster_id} rasdb:hasStartTime {domain_lower_bound}^^xsd:string ; rasdb:hasEndTime {domain_upper_bound}^^xsd:string ; rasdb:hasStartTimeGrid {grid_lower_bound}^^xsd:integer ; rasdb:hasEndTimeGrid {grid_upper_bound}^^xsd:integer ; rasdb:hasTemporalResolution {resolution}^^xsd:double .
source		SELECT id AS raster_id, coverage_id AS raster_name, domain_lower_bound, domain_upper_bound, grid_lower_bound, grid_upper_bound, resolution FROM lookup_main WHERE axis_label = 'ansi'

mappingId	mapping_get_spatial_dimension_domainX_lookup
target		:raster/{raster_id} rasdb:hasMinLongitude {min_long}^^xsd:double ; rasdb:hasMaxLongitude {max_long}^^xsd:double ; rasdb:hasSpatialResolution_lon {x_res}^^xsd:double .
source		SELECT id AS raster_id, coverage_id AS raster_name, min_long, max_long, resolution AS x_res FROM lookup_main WHERE axis_label = 'Long'

mappingId	mapping_get_spatial_dimension_domainY_lookup
target		:raster/{raster_id} rasdb:hasMinLatitude {min_lat}^^xsd:double ; rasdb:hasMaxLatitude {max_lat}^^xsd:double ; rasdb:hasSpatialResolution_lat {y_res}^^xsd:double .
source		SELECT id AS raster_id, coverage_id AS raster_name, min_lat, max_lat, resolution AS y_res FROM lookup_main WHERE axis_label = 'Lat'
]]
